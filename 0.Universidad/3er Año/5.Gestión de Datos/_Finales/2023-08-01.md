2.a
OLTP:
	Ej: Sistema para guardar tickets de pago de un supermercado
	En 99% de sistemas
	Para uso diario de la empresa 
	Eficaz para inserción, modifcación y eliminación de datos 
	Empleado en modelo de datos normalizados
	Los datos probienen directamente del uso cotidiando 

OLAP:
	Ej: Sistema para buscar tendencias de compra, a partir de los datos almacenados de un supermercado
	En 1% de sistemas
	Usado para anlisis dimensional de la info almacenada y ayudar a toma de decision
	Empleado en modelo de datos no normalizado
	Información probiene (usualmente) de DW donde se almacena y depuran los datos recibido de sistemas OLTP, para poder realizar un analisis más certero 

2.b.
Arbol b es un arbol de grado m, es decir, que cada nodo no puede tener más de m hijos (usualmente 50) y tiene el objetivo de minimizar la cantidad de accesos al disco, ya que, la busqueda se realiza por niveles. En cambio, el arbol b de busqueda balanceados debe ser de grado 2 y tambien debe estár ordenado (hijo mayor va a la derecha, hijo menor va a la izquierda) y está pensado para minimizar el tiempo que se tarda en encontrar una clave en memoria
___
3.a. Si se ejecuta N veces en paralelo puede ocurrir que el resultado no sea deterministico, esto es causado por la condición de carrera que ocurre a la hora de ejecutarlo en paralelo y sin tener un nivel de aislamiento adecuado

3.b.
```sql
CREATE PROCEDURE eliminarRepetidos (@id_dep INT, @id_prod INT)
AS BEGIN
	DECLARE @total INT;
	
	SELECT @total = SUM(s.cantidad)
		FROM stock s
		WHERE s.id_deposito = @id_dep AND s.id_producto = @id_prod
		GROUP BY id_deposito, id_producto
	
	DELETE * FROM Stock 
		WHERE id_deposito=@id_dep AND id_producto=@id_prod

	INSERT INTO Stock(cantidad, id_deposito, id_producto) 
		VALUES (@total, @id_dep, @id_prod)
END
```

```sql
CREATE TRIGER 
ON Stock
INSTEAD OF INSERT
AS BEGIN
	DECLARE @total INT, @id_dep INT, @id_prod INT;
	DECLARE cur CURSOR FOR 
		SELECT SUM(cantidad), id_deposito, id_producto
			FROM inserted 
			GROUP BY id_deposito, id_producto
	FETCH NEXT FROM cur INTO @total, @id_dep, @id_prod;

	WHILE @@FETCH_STATUS = 0
	BEGIN
		INSERT INTO Stock(cantidad, id_dep, id_prod) 
			VALUES(@total, @id_dep, @id_prod)
		
		FETCH NEXT FROM cur INTO @total, @id_dep, @id_prod;
	END
END
```